# ruru-parser

るる鯖の情報→（Python→Go（予定））→覚者ログ形式（JSON）→MongoDB→Python

# 使い方

* log_getter.py  るる鯖ログを取得
* ruru_parser.py  JSONに変換
* json_to_mongo.py  JSONをMongoDBに格納
* pure_mongo_to_add_mongo.py  元データを条件ごとに切り割りする（例: 身内村の除外 取得配役の選択　など）

add_mongo_to_cacheとcache_to_pandasはJupyter


# 開発環境の切り替え

source activate ruru-parser

# 将来的にする予定の内容

  * パーサ部分をGoで書き直し

# 統計分析箇所（覚者のオートマタの箇所）の仕様

  * MongoDBに格納されたデータをコピーする。
  * 推測役職と本役職の二段構えで運用する。
  * 推測役職でデータにfilterをかけ、本役職ごとの統計データを得るって感じの運用方法をしたい。

# MongoDBのデータ情報

  * DB名: PretaAutomata
  * コレクション名: PretaAutomata

条件
取得配役: 17A
身内村（ダンガンロンパ・なんJ・RP・村名に身内って入ってる村）除外
占いCOした奴除外

# 今後取りたいデータ

  * 初日に吊られる人と、そうじゃない人の発言傾向の差
  * 役職ごとの占い先の役職

17A　4-1進行別勝率

17A　12B

狼の騙り内訳と勝率（占霊のみカウント）

狐の騙り役職と勝率（占霊のみカウント）

3日目噛み先役職と勝率（実役職・表示役職共にカウント）

3日目護衛先役職と勝率（実役職・表示役職共にカウント）

# 改良点

  * 汚いログを殺す
  * パーサのバグ潰し
    * 役職情報にsと表示されることがある（恐らく、スマホアクセスの場合、変な取り方をしているのだろう（419999村において出現）
    * 勝利役職のデータ
    * 身内村か否かの追加
    * パーサの高速化

# 更新履歴

0.1 公開
0.11 勝利役職の追加　バージョンの追加